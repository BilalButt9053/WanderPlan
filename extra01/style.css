:root {
    --bg-cream: #FDFBF7;
    --red-deep: #740000;
    --red-vibrant: #A61C1C;
    --gold-main: #D4AF37;
    --gold-light: #F3E5AB;
    --text-dark: #1a1a1a;
    --font-heading: 'Playfair Display', serif;
    --font-body: 'Manrope', sans-serif;
    --font-hand: 'Indie Flower', cursive;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    background-color: var(--bg-cream);
    color: var(--text-dark);
    font-family: var(--font-body);
    overflow-x: hidden;
}

/* --- UI ELEMENTS --- */
.music-control {
    position: fixed; bottom: 30px; right: 30px; z-index: 100;
}
.music-btn {
    width: 50px; height: 50px; border-radius: 50%; border: 1px solid var(--gold-main);
    background: transparent; color: var(--gold-main); cursor: pointer;
}

/* --- SCENE 1: INTRO --- */
.hero-section {
    height: 100vh; width: 100vw; display: flex; justify-content: center; align-items: center;
    position: relative; overflow: hidden;
}

.title-main {
    font-family: var(--font-heading); font-size: 3.5rem; text-align: center;
    color: var(--red-deep); margin-bottom: 2rem; z-index: 2;
}
.gold-text {
    color: transparent; background: linear-gradient(45deg, var(--gold-main), #b88a00);
    -webkit-background-clip: text; background-clip: text; font-style: italic;
}

/* Background Orbs (Optimized) */
.gold-orb {
    position: absolute; border-radius: 50%; filter: blur(60px); opacity: 0.4; z-index: 0;
}
.orb-1 { width: 300px; height: 300px; background: var(--gold-light); top: -10%; left: -10%; }
.orb-2 { width: 400px; height: 400px; background: #ffdede; bottom: -10%; right: -10%; }

.whale-anim { width: 150px; animation: float 6s ease-in-out infinite; margin-bottom: 20px; }

@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

/* JUMPING WHALE */
.ocean-stage {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 40vh;
    z-index: 5; pointer-events: none; overflow: hidden;
}
.jumping-whale-sprite {
    position: absolute; width: 150px; opacity: 0; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.2));
}
.splash-mark {
    position: absolute; bottom: 0; width: 100px; height: 20px;
    background: rgba(255, 255, 255, 0.8); border-radius: 50%; transform: scale(0); opacity: 0; filter: blur(2px);
}
@keyframes splash-anim {
    0% { transform: scale(0); opacity: 0.8; }
    50% { opacity: 0.5; }
    100% { transform: scale(3); opacity: 0; }
}
.splash-active { animation: splash-anim 0.8s ease-out forwards; }

/* BUTTONS */
.interaction-zone { display: flex; gap: 20px; justify-content: center; position: relative; }

.magnetic-btn {
    padding: 15px 40px; border-radius: 50px; border: none; font-family: var(--font-body);
    font-size: 1rem; font-weight: 600; text-transform: uppercase; cursor: pointer; z-index: 10;
}
#btn-yes { background: var(--red-deep); color: white; box-shadow: 0 10px 30px rgba(116, 0, 0, 0.2); }
#btn-no { background: transparent; border: 1px solid var(--text-dark); color: var(--text-dark); }

/* --- SCENE 2: CELEBRATION --- */
.celebration-container { display: none; opacity: 0; position: relative; }

/* PAPER ROSE */
.rose-container {
    position: absolute; top: 30px; left: 30px; width: 100px; height: 100px;
    z-index: 50; transform: scale(0);
}
.flower { position: relative; width: 100%; height: 100%; }
.petal {
    position: absolute; width: 50px; height: 50px; background: var(--red-deep);
    border-radius: 50px 0px 50px 0px; box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
    top: 25px; left: 25px; transform-origin: center bottom; opacity: 0.9;
}
.petal:nth-child(1) { transform: rotate(0deg) scale(0); transition: transform 1s 0.2s; background: #5c0000; }
.petal:nth-child(2) { transform: rotate(72deg) scale(0); transition: transform 1s 0.4s; background: #740000; }
.petal:nth-child(3) { transform: rotate(144deg) scale(0); transition: transform 1s 0.6s; background: #8a1c1c; }
.petal:nth-child(4) { transform: rotate(216deg) scale(0); transition: transform 1s 0.8s; background: #a61c1c; }
.petal:nth-child(5) { transform: rotate(288deg) scale(0); transition: transform 1s 1.0s; background: #c42e2e; }

.rose-container.blooming { transform: scale(1); transition: transform 1s; }
.rose-container.blooming .petal { transform: scale(1); }
.rose-container.blooming .petal:nth-child(1) { transform: rotate(0deg) scale(1); }
.rose-container.blooming .petal:nth-child(2) { transform: rotate(72deg) scale(1); }
.rose-container.blooming .petal:nth-child(3) { transform: rotate(144deg) scale(1); }
.rose-container.blooming .petal:nth-child(4) { transform: rotate(216deg) scale(1); }
.rose-container.blooming .petal:nth-child(5) { transform: rotate(288deg) scale(1); }

.leaf {
    position: absolute; width: 30px; height: 60px; background: #4a6741;
    border-radius: 0 50px 0 50px; top: 60px; left: 10px; transform: rotate(-30deg) scale(0);
    transition: transform 1s 1.2s; z-index: -1;
}
.leaf-2 { left: 50px; transform: rotate(30deg) scale(0); transition: transform 1s 1.4s; }
.rose-container.blooming .leaf { transform: rotate(-30deg) scale(1); }
.rose-container.blooming .leaf-2 { transform: rotate(30deg) scale(1); }


/* SECTIONS */
.scroll-section {
    min-height: 90vh; display: flex; flex-direction: column; 
    justify-content: center; align-items: center; padding: 50px;
}

.glass-card {
    background: rgba(255, 255, 255, 0.5); /* Less opacity for speed */
    border: 1px solid rgba(255, 255, 255, 0.8); border-radius: 30px;
    padding: 40px; box-shadow: 0 20px 50px rgba(0,0,0,0.05);
}

.main-card {
    display: grid; grid-template-columns: 1fr 1fr; gap: 50px; max-width: 1200px;
}

/* CAKE FIX: Smaller Size */
.cake-visual {
    display: flex; justify-content: center; align-items: center;
}
.cake-visual img { 
    width: auto; 
    max-height: 50vh; /* Limits height so it's not huge */
    max-width: 100%;
    border-radius: 20px; 
    box-shadow: 10px 10px 0 var(--gold-main); 
}

.reveal-text { font-family: var(--font-heading); font-size: 3rem; color: var(--red-deep); margin-bottom: 20px; }
.poetic-wishes { font-size: 1.1rem; line-height: 1.8; color: #444; margin-bottom: 1rem; }

/* MARQUEE FIX: Infinite Scroll */
.cat-zone { 
    overflow: hidden; 
    background: var(--gold-light); 
    transform: rotate(-2deg); 
    margin: 50px 0; 
    padding: 20px 0; 
    width: 100%;
}
.marquee-wrapper { 
    width: 100%; 
    overflow: hidden; 
}
.marquee-content {
    display: flex;
    gap: 30px;
    width: max-content; /* Allows it to take up full width of children */
    animation: marquee 30s linear infinite; /* Smooth continuous scroll */
}
.cat-item { 
    height: 80px; 
    width: auto;
    border-radius: 10px; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
}

/* Move to -50% because we duplicated the content. -50% is exactly one full set. */
@keyframes marquee { 
    0% { transform: translateX(0); } 
    100% { transform: translateX(-50%); } 
}

/* POLAROID GALLERY */
.gallery-zone { position: relative; overflow: hidden; background: #fff5f5; }
.section-title { font-family: var(--font-heading); font-size: 2.5rem; color: var(--red-deep); margin-bottom: 10px; }
.instruction-small { opacity: 0.5; margin-bottom: 40px; }
.polaroid-wrapper { position: relative; width: 100%; height: 500px; }
.polaroid {
    position: absolute; background: white; padding: 10px 10px 40px 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1); width: 220px; cursor: grab;
}
.polaroid img { width: 100%; height: 180px; object-fit: cover; pointer-events: none; }
.polaroid p { font-family: var(--font-hand); text-align: center; margin-top: 10px; }
.p1 { top: 10%; left: 20%; transform: rotate(-5deg); }
.p2 { top: 30%; left: 50%; transform: rotate(3deg); }
.p3 { top: 50%; left: 30%; transform: rotate(-2deg); }

/* COMPLIMENTS */
.compliment-box { min-height: 80px; display: flex; align-items: center; justify-content: center; }
#compliment-text { font-family: var(--font-heading); font-size: 1.5rem; color: var(--text-dark); }

.final-footer { padding: 50px; text-align: center; color: var(--gold-main); font-style: italic; }

@media (max-width: 768px) {
    .main-card { grid-template-columns: 1fr; }
    .title-main { font-size: 2rem; }
    .cake-visual img { max-height: 30vh; }
}